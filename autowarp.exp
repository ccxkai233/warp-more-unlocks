#!/usr/bin/expect -f

# 设置一个较长的超时时间（秒），以防网络测试耗时过长
set timeout 600

# 启动 warp i 命令
spawn warp i

# 等待选择流媒体服务的提示
expect "您的选择:"

# 发送回车，选择所有服务
send "\r"

# 等待选择 IP 栈 (IPv4/IPv6) 的提示
expect "请选择:"

# 发送 "1" 或者回车，选择默认的 IPv4
send "1\r"

# 交互完成，脚本将自动运行直到成功
# 等待子进程结束
puts "自动化脚本已根据正确的流程启动 IP 更换。等待任务完成..."
expect eof